{{#if logged_in}}

  <div class="container-fluid profile-style">
    <div>
			<h1>
        Welcome to the marketplace!
      </h1><br>
			<h2>
        Feel free to browse around.<br>
        When you find an item you like, hit the DIBS button, and email the generous giver!
      </h2>
		</div>
	</div>
 
<div class = "new-post-container container-fluid">
      <button type="button" class="new-post btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#exampleModal">Post new item&nbsp;&nbsp;&nbsp;<img src = "/assets/images/plus-sign.PNG"></button>
</div>
{{/if}}

 <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Post a New Item</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="POST" id="submitNewPost">
            <div>
                <label for="item-name">Name of Item:</label>
                <input class='modal-max-width' id="item-name" type="text">
            </div>
            <div class="d-flex align-item-center">
                <label class="pr-2" for="item-descr">Description:&nbsp;&nbsp;</label>
                <textarea class='modal-max-width' name="item-descr" id="item-descr"></textarea>
            </div>
            <div>
              <label class="form-label" for="image-upload">Please Upload a Picture of the Item</label>
              <input type="file" class="form-control" id="image-upload" />  
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" id='modal-close-btn' class="btn btn-secondary mr-2" data-bs-dismiss="modal">Close</button>
          <button id='new-post-submit' type="submit" class="btn btn-success">Submit</button>
        </div>
      </div>
    </div>
  </div>

  <div class="container text-center">
    <div class="row" style="margin-top: 30px;">
      {{#each items as |item| }}
      <div class="col-sm-6 col-lg-4">
        <div class="card mb-3 standard-size">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"> {{item.name}}</h5>
            <img src={{item.image_url}} class="card-img-top item-image align-self-center" alt="item image" height="150px" width="150px">
            <p class="card-text mt-3 overflow-auto"> 
              {{item.description}} 
            </p>
            <button id={{item.id}} {{#if item.is_dibbed}}disabled{{/if}} class="octo-cursor mt-auto" style="background-color: #5c53d430; border:2px solid #5c53d4da; padding:5px 10px; border-radius: 0.375rem;">DIBS</button>
           {{#if item.is_dibbed}} <div>Contact Info: <a href="mailto:{{item.Giver.email}}">{{item.Giver.email}}</a></div>{{/if}}
          </div>
        </div>
      </div>
      {{/each}}
    </div>
  </div>

<script src="/js/newItem.js"></script>
<script src="/js/dibs.js"></script>
